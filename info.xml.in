<?xml version="1.0"?>
<module name="dynacase-cas" disabled="no" version="@VERSION@" release="@RELEASE@" infopath="http://www.dynacase.org/modules/dynacase-cas/dynacase-cas">

  <description lang="en">CAS (Central Authentication Service) support for Dynacase</description>

  <replaces>
        <module name="freedom-cas" />
  </replaces>

  <requires>
    <module name="dynacase-networkuser" />
    <module name="dynacase-platform" />
  </requires>

  <parameters>
    <param name="phpcas_url" label="phpCAS download URL" type="text" default="http://ftp.dynacase.org/third-party/CAS-1.0.1.tgz" />
  </parameters>

  <pre-install>
    <check type="syscommand" command="gunzip" />
    <check type="syscommand" command="tar" />
    <check type="phpfunction" function="curl_exec"><help>You might need to install a php-curl package in order to install CAS module.</help></check>
  </pre-install>
  
  <pre-upgrade>
    <check type="syscommand" command="gunzip" />
    <check type="syscommand" command="tar" />
    <check type="phpfunction" function="curl_exec"><help>You might need to install a php-curl package in order to install CAS module.</help></check>
  </pre-upgrade>

  <post-install>
    <download href="@phpcas_url" action="programs/phpcas_install"><label lang="en">Download and install phpCAS</label></download>
  </post-install>
  
  <post-upgrade>
    <download href="@phpcas_url" action="programs/phpcas_install"><label lang="en">Download and install phpCAS</label></download>
  </post-upgrade>

  <changelog>
    <version number="0.0.2-1" date="2010-03-30">
      <change title="Added support for downloading phpCAS source from third-party repo." />
    </version>
    <version number="0.0.1-1" date="2010-03-25">
      <change title="Initial release" />
    </version>
  </changelog>

</module>
