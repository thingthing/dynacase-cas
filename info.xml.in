<?xml version="1.0"?>
<module name="freedom-cas" disabled="no" version="@VERSION@" release="@RELEASE@" infopath="http://www.freedom-ecm.org/modules/freedom-cas/freedom-cas">

  <description lang="en">CAS (Central Authentication Service) support for Freedom</description>

  <requires>
    <module name="freedom-networkuser" />
  </requires>

  <parameters>
    <param name="phpcas_url" label="phpCAS download URL" type="text" default="http://ftp.freedom-ecm.org/third-party/CAS-1.0.1.tgz" />
  </parameters>

  <pre-install>
    <check type="syscommand" command="gunzip" />
    <check type="syscommand" command="tar" />
  </pre-install>
  
  <pre-upgrade>
    <check type="syscommand" command="gunzip" />
    <check type="syscommand" command="tar" />
  </pre-upgrade>

  <post-install>
    <download href="@phpcas_url" action="programs/phpcas_install"><label lang="en">Download and install phpCAS</label></download>
  </post-install>
  
  <post-upgrade>
    <download href="@phpcas_url" action="programs/phpcas_install"><label lang="en">Download and install phpCAS</label></download>
  </post-upgrade>

  <changelog>
    <version number="0.0.2-1" date="2010-03-30">
      <change title="Added support for downloading phpCAS source from third-party repo." />
    </version>
    <version number="0.0.1-1" date="2010-03-25">
      <change title="Initial release" />
    </version>
  </changelog>

</module>
